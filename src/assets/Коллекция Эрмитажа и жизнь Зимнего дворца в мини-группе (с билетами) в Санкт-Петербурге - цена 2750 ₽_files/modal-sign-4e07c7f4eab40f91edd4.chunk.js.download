(window.webpackJsonp=window.webpackJsonp||[]).push([[126,21],{1573:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(3)),l=n(a(748)),i=/[A-Za-z.*+?^${}()|[\]\\( )]/g;t.default=()=>{(0,r.default)(".js-input-phone").each((e,t)=>{var a=(0,r.default)(t),n=a.closest("form"),o=a.val()||"+";a.val(o),a.keyup(e=>{var t=(0,r.default)(e.target),a=n.find(".js-input-phone-raw"),o=t.val(),c="".concat((0,l.default)(o).replace(i,"")).slice(0,20);a.val("+".concat(c)),t.val((0,l.default)(c)||"+")}),a.change(e=>{var t=(0,r.default)(e.target),a=n.find(".js-input-phone-raw"),o=t.val(),c="".concat((0,l.default)(o).replace(i,"")).slice(0,20);/^8\d{10}$/g.test(c)?c="7".concat(c.slice(1)):(/^9\d{9}$/g.test(c)||/^(812|495|499)\d{7}$/g.test(c))&&(c="7".concat(c));a.val("+".concat(c)),t.val((0,l.default)(c)||"+")}),n.submit(()=>{a.change()})})}},748:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(440);t.default=e=>{var t=e.replace(/\D/g,"");return 0===t.length?"":(t="+".concat(t),(new n.AsYouType).input(t))}},913:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(document.querySelector("#".concat("recaptcha-v2")))return;var e=function(){var e=document.createElement("SCRIPT");return e.setAttribute("src","https://www.google.com/recaptcha/api.js?render=explicit"),e.setAttribute("async",""),e.setAttribute("defer",""),e.setAttribute("id","recaptcha-v2"),document.head.append(e),e}();e.addEventListener("load",l,{once:!0}),e.addEventListener("error",()=>{console.log("Google reCAPTCHA error.")},{once:!0})};var n=a(10);function r(e){try{e.dataset.widgetId=window.grecaptcha.render(e,{sitekey:n.RECAPTCHA_SITE_KEY_V2,size:"invisible",callback:()=>{(function e(t){return"FORM"===t.tagName?t:e(t.parentElement)})(e).submit()}})}catch(t){console.log("Google reCAPTCHA render() error.",t)}}function l(){try{window.grecaptcha.ready(()=>{document.querySelectorAll(".js-captcha-container").forEach(e=>{r(e)})})}catch(e){console.log("Google reCAPTCHA ready() error.",e)}}},915:function(e,t,a){"use strict";var n=a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(3)),l=n(a(1573)),i=n(a(913)),o=/[ $()*+.?A-Z[\\\]^a-z{|}]/g,c={ru:{error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",unavailable:"\u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e"},en:{error:"Enter a valid phone number",unavailable:"Currently unavailable"}},d=e=>c[window.gon.locale][e];t.default=()=>{(0,l.default)();var e=(0,r.default)(".js-modal"),t=e.find(".js-error-block");(0,r.default)(".js-modal-toggle").click(a=>{t.text(""),window.gon.enable_captcha&&(0,i.default)();var n=(0,r.default)(a.target).data("name");e.removeClass("sputnik-modal_visible"),(0,r.default)('.js-modal[data-name="'.concat(n,'"]')).addClass("sputnik-modal_visible")}),(0,r.default)(".js-modal-close").click(t=>{(0,r.default)(t.target).closest(e).removeClass("sputnik-modal_visible")}),(0,r.default)(document).keyup(t=>{27===t.keyCode&&e.removeClass("sputnik-modal_visible")}),e.click(e=>{e.stopPropagation(),(0,r.default)(e.target).removeClass("sputnik-modal_visible")}),(0,r.default)(".js-signin-social-btn").on("click",e=>{e.preventDefault(),t.text(d("unavailable"))}),(0,r.default)(".js-credentials").on("click",()=>{t.first().text()===d("unavailable")&&t.text("")}),(0,r.default)(".js-signin-type-radio").on("change",e=>{var t=(0,r.default)(e.target).closest("form").find(".js-input-email");(0,r.default)(".js-input-phone-raw").val(""),(0,r.default)(".js-input-phone").val(""),(0,r.default)(".js-input-email").val("");var a=(0,r.default)(e.target),n=a.closest("form").find(".js-error-block"),l=a.closest("form").find('input[name="signin_type"]:checked').attr("value"),i="email"===l;"phone"===l?t.attr("required",!1):i&&t.attr("required",!0),n.text("")}),(0,r.default)(".js-signin-submit").closest("form").on("submit",e=>{e.preventDefault();var t=(0,r.default)(e.target),a=t.find(".js-input-email"),n=t.find(".js-input-phone-raw"),l=t.find(".js-error-block");l.text("");var i=t.find('input[name="signin_type"]:checked').attr("value"),c="phone"===i,u="email"===i;if(c){var s=n.data("input-name")||"user[loginsph]";a.attr("name",""),n.attr("name",s)}else if(u){var f=a.data("input-name")||"user[loginsph]";a.attr("name",f),n.attr("name","")}var p=n.val().replace(o,"").length<6;if(c&&p)l.text(d("error"));else if(window.grecaptcha){var v,m=null===(v=t.find(".js-captcha-container"))||void 0===v?void 0:v.data("widgetId");window.grecaptcha.execute(m)}else e.target.submit()})}}}]);
//# sourceMappingURL=modal-sign-4e07c7f4eab40f91edd4.chunk.js.map